<div class="cart-container">
  <!-- Breadcrumb / Steps -->
  <div class="breadcrumb" *ngIf="cartItems.length > 0">
    <span class="active-step">Gi·ªè h√†ng</span>
    <span class="inactive-step">X√°c nh·∫≠n</span>
    <span class="inactive-step">Thanh to√°n</span>
  </div>

  <!-- Gi·ªè h√†ng khi tr·ªëng -->
  <div *ngIf="cartItems.length === 0; else cartContent">
    <!-- G·ª≠i tin -->
    <div class="empty-cart">
      <h2>Gi·ªè h√†ng tr·ªëng!</h2>
      <p>Th√™m s·∫£n ph·∫©m v√†o gi·ªè v√† quay l·∫°i trang n√†y ƒë·ªÉ thanh to√°n nha b·∫°n &lt;3</p>
      <img src="https://i.pinimg.com/originals/6f/a3/49/6fa34922a2c7139cf07ce4d2928a0386.jpg" class="empty-cart-image" />
    </div>
  </div>

  <!-- Gi·ªè h√†ng khi c√≥ ƒë·ªì -->
  <ng-template #cartContent>
    <div class="cart-content">
      <!-- Left: Cart Items -->
      <div class="cart-items">
        <h2>Gi·ªè h√†ng ({{ cartItems.length }} s·∫£n ph·∫©m)</h2>
        <div class="cart-item" *ngFor="let item of cartItems">
          <img [src]="item.image" [alt]="item.productName" class="product-image" />
          <div class="product-details">
            <h3>{{ item.productName || 'T√™n s·∫£n ph·∫©m kh√¥ng x√°c ƒë·ªãnh' }}</h3>
            <span class="stock-status">T√¨nh tr·∫°ng: <span class="in-stock">C√≤n h√†ng</span></span>
          </div>
          <div class="product-quantity">
            <button (click)="decreaseQuantity(item)">-</button> 
            <span>{{ item.quantity }}</span>
            <button (click)="increaseQuantity(item)">+</button>
          </div>
          <div class="product-price">
            <span class="current-price">{{ item.price * 1000 | currencySuffix }}</span>
          </div>
          <button class="remove-item" (click)="removeItem(item)">üóëÔ∏è</button>
        </div>        
      </div>

      <!-- Right: Payment Summary -->
      <div class="payment-summary">
          <!-- M√£ ∆∞u ƒë√£i -->
          <div class="summary-row">
            <label (click)="toggleCoupon()">B·∫°n c√≥ m√£ ∆∞u ƒë√£i?</label>
            <span class="icon" (click)="toggleCoupon()">%</span>
          </div>

        <!-- M·ªü r·ªông nh·∫≠p m√£ ∆∞u ƒë√£i -->
        <div class="coupon-section" *ngIf="isCouponExpanded">
          <input
            type="text"
            class="coupon-input"
            [(ngModel)]="couponCode"
            placeholder="M√£ gi·∫£m gi√°"
          />
          <button class="apply-btn" (click)="applyVoucherCode()">√Åp d·ª•ng</button>
        </div>

        <!-- T·ªïng gi√° tr·ªã -->
        <div class="summary-total">
          <div>
            <span>T·ªïng gi√° tr·ªã s·∫£n ph·∫©m</span>
            <span>{{ totalPrice * 1000 | currencySuffix }}</span>
          </div>
          <div>
            <span>T·ªïng gi√° tr·ªã ph·∫£i thanh to√°n</span>
            <span>{{ totalPrice * 1000 | currencySuffix }}</span>
          </div>
          <div>
            <span>S·ªë d∆∞ hi·ªán t·∫°i</span>
            <span>{{ balance * 1000 | currencySuffix }}</span>
          </div>
          <div>
            <span>S·ªë ti·ªÅn c·∫ßn n·∫°p th√™m</span>
            <span>{{ requiredAmount  * 1000 | currencySuffix }}</span>
          </div>
        </div>
        <button class="recharge-btn">üîÑ N·∫°p th√™m v√†o t√†i kho·∫£n</button>
        <button 
          class="pay-balance-btn" 
          (click)="payWithBalance()" 
          [disabled]="balance < totalPrice"
        >
        üíµ Thanh to√°n b·∫±ng s·ªë d∆∞
        </button>
        <button class="pay-banking-btn">üí≥ VNPay</button>
      </div>
    </div>
  </ng-template>
</div>

  
